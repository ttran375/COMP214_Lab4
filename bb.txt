CREATE TABLE Department (
    idDepartment NUMBER(2) PRIMARY KEY,
    DeptName VARCHAR2(25),
    DeptDesc VARCHAR2(100),
    DeptImage VARCHAR2(25)
);

CREATE TABLE Product (
    idProduct NUMBER(2) PRIMARY KEY,
    ProductName VARCHAR2(25),
    Description VARCHAR2(100),
    ProductImage VARCHAR2(25),
    Price NUMBER(6,2),
    Stock NUMBER(5,1),
    idDepartment NUMBER(2),
    CONSTRAINT prod_idDept_fk FOREIGN KEY (idDepartment) REFERENCES Department (idDepartment)
);

CREATE TABLE ProductOption (
    idProductOption NUMBER(3) PRIMARY KEY,
    idOption NUMBER(2),
    idProduct NUMBER(2),
    CONSTRAINT prodopt_prodid_fk FOREIGN KEY(idProduct) REFERENCES Product(idProduct)
);

CREATE TABLE Basket (
    idBasket NUMBER(5) PRIMARY KEY,
    Quantity NUMBER(2),
    idShopper NUMBER(4),
    OrderPlaced NUMBER(1),
    SubTotal NUMBER(7,2),
    Total NUMBER(7,2),
    Shipping NUMBER(5,2),
    Tax NUMBER(5,2),
    dtCreated DATE DEFAULT SYSDATE,
    Promo NUMBER(2),
    ShipFlag CHAR(1) DEFAULT 'N',
    CONSTRAINT bskt_idshopper_fk FOREIGN KEY (idShopper) REFERENCES Shopper(idShopper)
);

CREATE TABLE BasketItem (
    idBasketItem NUMBER(2) PRIMARY KEY,
    idProduct NUMBER(2),
    Price NUMBER(6,2),
    Quantity NUMBER(2),
    idBasket NUMBER(5),
    CONSTRAINT bsktitem_bsktid_fk FOREIGN KEY (idBasket) REFERENCES Basket(idBasket),
    CONSTRAINT bsktitem_idprod_fk FOREIGN KEY (idProduct) REFERENCES Product(idProduct)
);

CREATE TABLE Shopper (
    idShopper NUMBER(4) PRIMARY KEY,
    FirstName VARCHAR2(15),
    LastName VARCHAR2(20),
    Address VARCHAR2(40),
    City VARCHAR2(20),
    State CHAR(2),
    ZipCode VARCHAR2(15),
    Phone VARCHAR2(10),
    Email VARCHAR2(25),
    UserName VARCHAR2(8),
    Password VARCHAR2(8),
    dtEntered DATE DEFAULT SYSDATE
);

CREATE TABLE BasketStatus (
    idStatus NUMBER(5) PRIMARY KEY,
    idBasket NUMBER(5),
    idStage NUMBER(1),
    dtStage DATE,
    CONSTRAINT BasketStatus_idBasket_fk FOREIGN KEY (idBasket) REFERENCES Basket(idBasket)
);

CREATE TABLE Shipping (
    idRange NUMBER(2) PRIMARY KEY,
    Low NUMBER(3),
    High NUMBER(3),
    Fee NUMBER(6,2)
);

CREATE TABLE Tax (
    idState NUMBER(2) PRIMARY KEY,
    State CHAR(2),
    TaxRate NUMBER(4,3)
);

CREATE TABLE PromoList (
    idShopper NUMBER(4),
    month CHAR(3),
    year CHAR(4),
    promo_flag CHAR(2),
    Used CHAR(1) DEFAULT 'N',
    CONSTRAINT promo_uk UNIQUE (idShopper, month, year),
    CONSTRAINT promo_idshopper_fk FOREIGN KEY (idShopper) REFERENCES Shopper(idShopper)
);

CREATE TABLE Promo (
    idPromo CHAR(1) PRIMARY KEY,
    amount NUMBER(5,2)
);

CREATE TABLE AuditLogon (
    userid VARCHAR2(10),
    logdate DATE
);
